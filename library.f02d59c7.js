!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r);var a=r("54T7b");function i({id:e,posterURL:t="",title:n="",genres:r="no info",year:a="no info",votes:i=""}){return` \n    <div class="card" data-filmid="${e}">\n        <img src="${t}" alt="${n}" class="card__pic">\n        <div class="card__information">\n            <p class="card__film-name">${n}</p>\n            <div class="card__additional-information">\n                <ul class="card__gener-list">\n                    <li class="card__gener-item">${r}</li>\n                </ul>\n                <div class="card__vl"></div>\n                <p class="card__release-year">${a}</p>\n            </div>\n        </div>\n    </div>\n  `}var o=r("73ES2"),d=r("kWfXz");let l=a.default.watched,c=1;const s={gallery:document.querySelector(".gallery"),btnWatched:document.querySelector("#btn-watched"),btnQueue:document.querySelector("#btn-queue"),modalContent:document.querySelector(".modal__content")};function u(e){const t=e.currentTarget;t===s.btnWatched&&l===a.default.watched||t===s.btnQueue&&l===a.default.queue||(c=1,t===s.btnWatched?(l=a.default.watched,s.btnWatched.classList.add("is-active"),s.btnQueue.classList.remove("is-active")):t===s.btnQueue&&(l=a.default.queue,s.btnWatched.classList.remove("is-active"),s.btnQueue.classList.add("is-active")),l.refreshMovies(),v())}Object.values(s).some((e=>!e))&&console.error("Error: invalid markup!"),s.gallery.insertAdjacentHTML("afterend",'<div class="js-guard"></div>'),s.guardDiv=document.querySelector(".js-guard"),s.btnWatched.addEventListener("click",u),s.btnQueue.addEventListener("click",u);const f=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&c<l.getCountPages(9)&&(c+=1,v())}))}),{root:null,rootMargin:"300px",threshold:1});function v(){1===c&&(l.getCount()>0?s.gallery.innerHTML="":s.gallery.innerHTML='<li class="gallery_pin">The library is empty</li>');const e=l.getMoviesPage(c,9);s.gallery.insertAdjacentHTML("beforeend",function(e){return e.map((e=>i(e))).join("")}(e)),1===c&&l.getCountPages(9)>1?f.observe(s.guardDiv):c===l.getCountPages(9)&&f.unobserve(s.guardDiv)}function g(){c=1,v()}v(),s.gallery.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest(".card");if(!t)return;const n=t.dataset.filmid,r=l.getMovieById(n);if(!r)return void console.error(`Movie with id = ${n} isn't found in library!`);s.modalContent.innerHTML=(0,o.default)(r),(0,d.openMovieModal)(g)}))}();
//# sourceMappingURL=library.f02d59c7.js.map
