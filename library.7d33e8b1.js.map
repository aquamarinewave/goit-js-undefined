{"mappings":"gsBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAS,CACbC,QAAS,IAAI,EAAAH,EAAAI,SAAc,gBAC3BC,MAAS,IAAI,EAAAL,EAAAI,SAAc,e,IAG7BE,EAAeJ,EAKf,IAAK,MAAMK,IAAO,CAAC,UAAW,SAAU,CACtC,MAAMC,EAAQN,EAAOK,GACrBC,EAAMC,cACN,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAC3BF,EAAMG,SAAS,CACbC,GAAIC,OAAOH,EAAI,GACfI,MAAO,6BAA6BP,KACpCQ,UAAmB,WAARR,EAAqB,kEAC9B,kEACFS,OAAQ,gBACRC,KAAM,OACNC,KAAM,MACNC,MAAO,OACPC,WAAY,QACZC,SAAU,2BACVC,SAAU,uS,qFC1BhB,IAAAC,EAAAtB,EAAA,S,wDAIEuB,EAAiB,IAAAC,QACjBC,EAAO,IAAAD,QASPE,EAAW,IAAAC,QAQXC,EAAW,IAAAD,QApBE,MAAME,EAkCnBC,WACE,OAAOC,EAAAT,EAAA,CAAAU,KAAMP,GAAOQ,M,CAGtBC,YACE,OAAAH,EAAAT,EAAA,CAAOU,KAAMP,E,CAGfU,aAAaC,GACX,OAAOL,EAAAT,EAAA,CAAAU,KAAMP,GAAOY,MAAKC,GAAMA,EAAG3B,KAAOyB,G,CAG3CG,cAAcC,GACZ,OAAOC,KAAKC,KAAKX,EAAAT,EAAA,CAAAU,KAAMP,GAAOQ,OAASO,E,CAGzCG,cAAcC,EAAO,EAAGJ,GAAW,GACjC,OAAiB,IAAbA,EACFT,EAAAT,EAAA,CAAOU,KAAMP,GAENM,EAAAT,EAAA,CAAAU,KAAMP,GAAOoB,OAAOD,EAAO,GAAKJ,EAAUI,EAAOJ,E,CAI5DM,gBACEf,EAAAgB,EAAA,CAAAf,KAAMJ,EAAAoB,GAAUC,KAAhBjB,K,CAGFxB,c,UACQiB,EAAS,IACfM,EAAAgB,EAAA,CAAAf,KAAMN,EAAAwB,GAAUD,KAAhBjB,K,CAGFtB,SAASyC,GACP,MAAMC,EAAUrB,EAAAT,EAAA,CAAAU,KAAMP,GAAO4B,WAAUf,GAAMA,EAAG3B,KAAOwC,EAAMxC,MAC7C,IAAZyC,EACFrB,EAAAT,EAAA,CAAAU,KAAMP,GAAO2B,GAAWD,EAExBpB,EAAAT,EAAA,CAAAU,KAAMP,GAAO6B,KAAKH,GAEpBpB,EAAAgB,EAAA,CAAAf,KAAMN,EAAAwB,GAAUD,KAAhBjB,K,CAGFuB,YAAYnB,GACV,MAAMgB,EAAUrB,EAAAT,EAAA,CAAAU,KAAMP,GAAO4B,WAAUf,GAAMA,EAAG3B,KAAOyB,KACvC,IAAZgB,IACFrB,EAAAT,EAAA,CAAAU,KAAMP,GAAO+B,OAAOJ,EAAS,GAC7BrB,EAAAgB,EAAA,CAAAf,KAAMN,EAAAwB,GAAUD,KAAhBjB,M,CA5EJyB,YAAYC,EAAU,SAOtB3B,EAAA4B,EAAA,CAAA3B,KAAAN,GAQAK,EAAA4B,EAAA,CAAA3B,KAAAJ,GAlBAG,EAAA6B,EAAA,CAAA5B,KAAAT,EAAiB,C,uBAAjB,IACAQ,EAAA6B,EAAA,CAAA5B,KAAAP,EAAO,C,kBAAG,K,UAGFF,EARsB,iBAQuBmC,GACnD3B,EAAAgB,EAAA,CAAAf,KAAMJ,EAAAoB,GAAUC,KAAhBjB,K,EAKF,SAAAkB,IACE,IACEW,aAAaC,QAAO/B,EAAAT,EAAA,CAACU,KAAMT,GAAkBwC,KAAKC,UAASjC,EAAAT,EAAA,CAACU,KAAMP,I,CAClE,MAAOwC,GACPC,QAAQC,MAAM,iDAA+CpC,EAAAT,EAAA,CAAEU,KAAMT,K,EAIzE,SAAAyB,I,UACQvB,EAAS,IACf,MAAM2C,EAAaP,aAAaQ,QAAOtC,EAAAT,EAAA,CAACU,KAAMT,IAC9C,GAAI6C,EACF,I,UACQ3C,EAASsC,KAAKO,MAAMF,G,CAC1B,MAAOH,GACPC,QAAQC,MAAM,kDAAgDpC,EAAAT,EAAA,CAAEU,KAAMT,K,wCC7B9EgD,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QAGR,SAA+ByE,EAAUC,GACrC,IAAIC,EAAaC,EAAkC5E,QAAQyE,EAAUC,EAAY,OACjF,OAAOG,EAA8B7E,QAAQyE,EAAUE,E,EAJ3D,IAAIC,EAA+BE,EAAuBjF,EAAA,UACtDgF,EAA2BC,EAAuBjF,EAAA,UAKtD,SAASiF,EAAuBC,GAC5B,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACjC/E,QAAS+E,E,uCCZjBX,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAsCyE,EAAUC,EAAYO,GACxD,IAAKP,EAAWQ,IAAIT,GAChB,MAAM,IAAIU,UAAU,gBAAkBF,EAAS,kCAEnD,OAAOP,EAAWU,IAAIX,E,uCCR1BL,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAkCyE,EAAUE,GACxC,OAAIA,EAAWS,IACJT,EAAWS,IAAItC,KAAK2B,GAExBE,EAAWH,K,uCCRtBJ,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QAER,SAAgC+E,EAAKL,EAAYF,GAC7Ca,EAAgCrF,QAAQ+E,EAAKL,GAC7CA,EAAWY,IAAIP,EAAKP,E,EAHxB,IAKgCO,EAL5BM,GAK4BN,EALwBlF,EAAA,WAMtCkF,EAAIC,WAAaD,EAAM,CACjC/E,QAAS+E,E,sCCXjBX,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAoC+E,EAAKQ,GACrC,GAAIA,EAAkBL,IAAIH,GACtB,MAAM,IAAII,UAAU,iE,uCCN5Bf,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QAGR,SAA+ByE,EAAUC,EAAYF,GACjD,IAAIG,EAAaa,EAAkCxF,QAAQyE,EAAUC,EAAY,OAEjF,OADAe,EAA8BzF,QAAQyE,EAAUE,EAAYH,GACrDA,C,EALX,IAAIgB,EAA+BE,EAAuB7F,EAAA,UACtD4F,EAA2BC,EAAuB7F,EAAA,UAMtD,SAAS6F,EAAuBX,GAC5B,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CACjC/E,QAAS+E,E,uCCbjBX,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAkCyE,EAAUE,EAAYH,GACpD,GAAIG,EAAWW,IACXX,EAAWW,IAAIxC,KAAK2B,EAAUD,OAC3B,CACH,IAAKG,EAAWgB,SAIZ,MAAM,IAAIR,UAAU,4CAExBR,EAAWH,MAAQA,C,wCCd3BJ,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QACR,SAAgCyE,EAAUmB,EAAYC,GAClD,IAAKD,EAAWV,IAAIT,GAChB,MAAM,IAAIU,UAAU,kDAExB,OAAOU,C,uCCRXzB,OAAOC,eAAeC,EAAAC,QAAS,aAAc,CACzCC,OAAO,IAEXF,EAAAC,QAAQvE,QAER,SAAiC+E,EAAKa,GAClCE,EAAgC9F,QAAQ+E,EAAKa,GAC7CA,EAAWG,IAAIhB,E,EAHnB,IAKgCA,EAL5Be,GAK4Bf,EALwBlF,EAAA,WAMtCkF,EAAIC,WAAaD,EAAM,CACjC/E,QAAS+E,E","sources":["src/js/library-service.js","src/js/library-api.js","node_modules/@swc/helpers/lib/_class_private_field_get.js","node_modules/@swc/helpers/lib/_class_extract_field_descriptor.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_get.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_private_field_set.js","node_modules/@swc/helpers/lib/_class_apply_descriptor_set.js","node_modules/@swc/helpers/lib/_class_private_method_get.js","node_modules/@swc/helpers/lib/_class_private_method_init.js"],"sourcesContent":["import MoviesLibrary from './library-api';\n\nconst myLibs = {\n  watched: new MoviesLibrary('Watched_Test'),    // !?! - удалить _Test при деплое\n  queue:   new MoviesLibrary('Queue_Test')\n}\n\nexport default myLibs;\n\n\n// !?! Тестовое наполнение - удалить при деплое\n\nfor (const key of ['watched', 'queue']) {\n  const myLib = myLibs[key];\n  myLib.clearMovies();\n  for (let i = 0; i < 20; i += 1) {\n    myLib.addMovie({\n      id: String(i + 1),\n      title: `Avatar: The Way of Water (${key})`,\n      posterURL: (key == 'watched') ? 'https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg' :\n        'https://image.tmdb.org/t/p/w500/sfCmTkVVtwoW4yNu1Cs4ZDtCTa5.jpg',\n      genres: 'Drama, Comedy',\n      year: '2022',\n      vote: '5.7',\n      votes: '1234',\n      popularity: '100.2',\n      original: `Avatar: The Way of Water`,\n      overview: `Set more than a decade after the events of the first film, learn the story of the Sully family \n        (Jake, Neytiri, and their kids), the trouble that follows them, the lengths they go to keep each other safe,\n        the battles they fight to stay alive, and the tragedies they endure.`\n    });\n  }\n}\n// ------------------------------\n\n","\nconst LOCALSTORAGE_KEY_PREFIX = 'MoviesLibrary_'; \n\nexport default class MoviesLibrary {\n\n  #LOCALSTORAGE_KEY;\n  #movies = [];\n\n  constructor(libName = 'mylib') {\n    this.#LOCALSTORAGE_KEY = LOCALSTORAGE_KEY_PREFIX + libName;\n    this.#loadMovies();\n  }\n\n  // -------  PRIVATE SECTION  -------\n  \n  #saveMovies() {\n    try {\n      localStorage.setItem(this.#LOCALSTORAGE_KEY, JSON.stringify(this.#movies));\n    } catch (err) {\n      console.error(`Error: failure saving movies in LocalStorage: ${this.#LOCALSTORAGE_KEY}`);\n    }\n  }\n\n  #loadMovies() {\n    this.#movies = [];\n    const jsonMovies = localStorage.getItem(this.#LOCALSTORAGE_KEY);\n    if (jsonMovies) {\n      try {\n        this.#movies = JSON.parse(jsonMovies);\n      } catch (err) {\n        console.error(`Error: invalid movies library in LocalStorage: ${this.#LOCALSTORAGE_KEY}`);\n      }\n    }\n  }\n\n  // -------  INTERFACE  -------\n  \n  getCount() {\n    return this.#movies.length;\n  }\n\n  getMovies() {\n    return this.#movies;\n  }\n\n  getMovieById(movieId) {\n    return this.#movies.find(el => el.id === movieId);\n  }\n\n  getCountPages(per_page) {\n    return Math.ceil(this.#movies.length / per_page);\n  }\n\n  getMoviesPage(page = 1, per_page = -1) {     // per_page === -1 - get all library, without pagination\n    if (per_page === -1) {\n      return this.#movies;\n    } else {\n      return this.#movies.slice((page - 1) * per_page, page * per_page);\n    }\n  }\n\n  refreshMovies() {\n    this.#loadMovies();\n  }\n\n  clearMovies() {\n    this.#movies = [];\n    this.#saveMovies();\n  }\n\n  addMovie(movie) {\n    const indexId = this.#movies.findIndex(el => el.id === movie.id);\n    if (indexId !== -1) {\n      this.#movies[indexId] = movie;\n    } else {\n      this.#movies.push(movie);\n    }\n    this.#saveMovies();\n  }\n\n  removeMovie(movieId) {\n    const indexId = this.#movies.findIndex(el => el.id === movieId);\n    if (indexId !== -1) {\n      this.#movies.splice(indexId, 1);\n      this.#saveMovies();\n    }\n  }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldGet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorGet = _interopRequireDefault(require(\"./_class_apply_descriptor_get\"));\nfunction _classPrivateFieldGet(receiver, privateMap) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"get\");\n    return (0, _classApplyDescriptorGet).default(receiver, descriptor);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classExtractFieldDescriptor;\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n    if (!privateMap.has(receiver)) {\n        throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n    }\n    return privateMap.get(receiver);\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorGet;\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n    if (descriptor.get) {\n        return descriptor.get.call(receiver);\n    }\n    return descriptor.value;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldSet;\nvar _classExtractFieldDescriptor = _interopRequireDefault(require(\"./_class_extract_field_descriptor\"));\nvar _classApplyDescriptorSet = _interopRequireDefault(require(\"./_class_apply_descriptor_set\"));\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n    var descriptor = (0, _classExtractFieldDescriptor).default(receiver, privateMap, \"set\");\n    (0, _classApplyDescriptorSet).default(receiver, descriptor, value);\n    return value;\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classApplyDescriptorSet;\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n    if (descriptor.set) {\n        descriptor.set.call(receiver, value);\n    } else {\n        if (!descriptor.writable) {\n            // This should only throw in strict mode, but class bodies are\n            // always strict and private fields can only be used inside\n            // class bodies.\n            throw new TypeError(\"attempted to set read only private field\");\n        }\n        descriptor.value = value;\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodGet;\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n        throw new TypeError(\"attempted to get private field on non-instance\");\n    }\n    return fn;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateMethodInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateMethodInit(obj, privateSet) {\n    (0, _checkPrivateRedeclaration).default(obj, privateSet);\n    privateSet.add(obj);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n"],"names":["$kHcJZ","parcelRequire","$2d95a85f2e4eca59$var$myLibs","watched","default","queue","$2d95a85f2e4eca59$export$2e2bcd8739ae039","key","myLib","clearMovies","i","addMovie","id","String","title","posterURL","genres","year","vote","votes","popularity","original","overview","$jkMrE","$f111b4e01d7d062a$var$_LOCALSTORAGE_KEY","WeakMap","$f111b4e01d7d062a$var$_movies","$f111b4e01d7d062a$var$_saveMovies","WeakSet","$f111b4e01d7d062a$var$_loadMovies","$f111b4e01d7d062a$export$2e2bcd8739ae039","getCount","$parcel$interopDefault","this","length","getMovies","getMovieById","movieId","find","el","getCountPages","per_page","Math","ceil","getMoviesPage","page","slice","refreshMovies","$hl3Cc","$f111b4e01d7d062a$var$loadMovies","call","$f111b4e01d7d062a$var$saveMovies","movie","indexId","findIndex","push","removeMovie","splice","constructor","libName","$8iF6T","$g6yUq","localStorage","setItem","JSON","stringify","err","console","error","jsonMovies","getItem","parse","Object","defineProperty","module","exports","value","receiver","privateMap","descriptor","$e13576b86460cc50$var$_classExtractFieldDescriptor","$e13576b86460cc50$var$_classApplyDescriptorGet","$e13576b86460cc50$var$_interopRequireDefault","obj","__esModule","action","has","TypeError","get","$bb98491953509995$var$_checkPrivateRedeclaration","set","privateCollection","$c36c16f840444775$var$_classExtractFieldDescriptor","$c36c16f840444775$var$_classApplyDescriptorSet","$c36c16f840444775$var$_interopRequireDefault","writable","privateSet","fn","$60afe4cd2804d2bb$var$_checkPrivateRedeclaration","add"],"version":3,"file":"library.7d33e8b1.js.map"}