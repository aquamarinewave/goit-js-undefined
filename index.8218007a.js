!function(){function t(t,e,o,n){Object.defineProperty(t,e,{get:o,set:n,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=o.parcelRequired7c6;null==a&&((a=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},o.parcelRequired7c6=a),a.register("73ES2",(function(e,o){function n({id:t,posterURL:e="",title:o="",genres:n="",year:r="",vote:a="",votes:i="",popularity:s="",original:l="",overview:d=""}){return`\n  \n    <div class="modal__poster">\n    <button type="button" class="modal__button-cls">\n      <svg height="30" width="30" class="modal__icon">\n        <use href="/sprite.f14d31f7.svg#icon-close"></use>\n      </svg>\n    </button>\n      <img class="modal__image" src="${e}" alt="${o}"/>\n    </div>\n    <div class="modal__information" data-filmid="${t}">\n      <h1 class="modal__title">${o}</h1>\n      <table class="modal__table">\n        <tr class="modal__tr">\n          <td class="modal__td">Vote / Votes</td>\n          <td class="modal__td-right">\n            <span class="modal__vote">${a}</span>\n            / <span class="modal__votes">${i}</span>\n          </td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Popularity</td>\n          <td class="modal__td-right modal__popularity">${s}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Original Title</td>\n          <td class="modal__td-right modal__original">${l}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Genre</td>\n          <td class="modal__td-right modal__genres">${n}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Year</td>\n          <td class="modal__td-right modal__year">${r}</td>\n        </tr>\n      </table>\n      <h2 class="modal__description">About</h2>\n      <p class="modal__text">${d}</p>\n      <div class="modal__flex">\n        <button class="modal__button modal__button--watched js-active" type="button">add to Watched</button>\n        <button class="modal__button modal__button--queue js-active" type="button">add to queue</button>\n      </div>\n    </div> \n  `}t(e.exports,"default",(function(){return n}))})),a.register("kWfXz",(function(e,o){t(e.exports,"initModal",(function(){return i}));var n=a("54T7b");let r;function i(){return r={btnWatched:document.querySelector(".modal__button--watched"),btnQueue:document.querySelector(".modal__button--queue"),infoId:document.querySelector(".modal__information"),title:document.querySelector(".modal__title"),poster:document.querySelector(".modal__image"),genres:document.querySelector(".modal__genres"),year:document.querySelector(".modal__year"),vote:document.querySelector(".modal__vote"),votes:document.querySelector(".modal__votes"),popularity:document.querySelector(".modal__popularity"),original:document.querySelector(".modal__original"),overview:document.querySelector(".modal__text")},Object.values(r).some((t=>!t))&&console.error("Error: invalid markup of modal window!"),r.btnWatched.addEventListener("click",l.bind(null,"watched")),r.btnQueue.addEventListener("click",l.bind(null,"queue")),d(),r}function s(){return r.infoId.dataset.filmid}function l(t){const e=s();if(e){if(n.default[t].getMovieById(e))n.default[t].removeMovie(e);else{const e={id:s(),title:r.title.textContent,posterURL:r.poster.src,overview:r.overview.textContent,genres:r.genres.textContent,year:r.year.textContent,vote:r.vote.textContent,votes:r.votes.textContent,popularity:r.popularity.textContent,original:r.original.textContent};n.default[t].addMovie(e)}d()}}function d(){const t=s();t&&(n.default.watched.getMovieById(t)?(r.btnWatched.textContent="REMOVE FROM WATCHED",r.btnWatched.classList.remove("js-active")):(r.btnWatched.textContent="ADD TO WATCHED",r.btnWatched.classList.add("js-active")),n.default.queue.getMovieById(t)?(r.btnQueue.textContent="REMOVE FROM QUEUE",r.btnQueue.classList.remove("js-active")):(r.btnQueue.textContent="ADD TO QUEUE",r.btnQueue.classList.add("js-active")))}})),a.register("54T7b",(function(e,o){t(e.exports,"default",(function(){return r}));var n=a("bSEwQ");var r={watched:new(0,n.default)("Watched"),queue:new(0,n.default)("Queue")}})),a.register("bSEwQ",(function(o,n){t(o.exports,"default",(function(){return v}));var r=a("4KMWL"),i=a("8MQK7"),s=a("dPxxm"),l=a("beht7"),d=a("fyAfh");var u=new WeakMap,c=new WeakMap,f=new WeakSet,_=new WeakSet;class v{getCount(){return e(r)(this,c).length}getMovies(){return e(r)(this,c)}getMovieById(t){return e(r)(this,c).find((e=>e.id===t))}getCountPages(t){return Math.ceil(e(r)(this,c).length/t)}getMoviesPage(t=1,o=-1){return-1===o?e(r)(this,c):e(r)(this,c).slice((t-1)*o,t*o)}refreshMovies(){e(l)(this,_,m).call(this)}clearMovies(){e(s)(this,c,[]),e(l)(this,f,p).call(this)}addMovie(t){const o=e(r)(this,c).findIndex((e=>e.id===t.id));-1!==o?e(r)(this,c)[o]=t:e(r)(this,c).push(t),e(l)(this,f,p).call(this)}removeMovie(t){const o=e(r)(this,c).findIndex((e=>e.id===t));-1!==o&&(e(r)(this,c).splice(o,1),e(l)(this,f,p).call(this))}constructor(t="mylib"){e(d)(this,f),e(d)(this,_),e(i)(this,u,{writable:!0,value:void 0}),e(i)(this,c,{writable:!0,value:[]}),e(s)(this,u,"MoviesLibrary_"+t),e(l)(this,_,m).call(this)}}function p(){try{localStorage.setItem(e(r)(this,u),JSON.stringify(e(r)(this,c)))}catch(t){console.error(`Error: failure saving movies in LocalStorage: ${e(r)(this,u)}`)}}function m(){e(s)(this,c,[]);const t=localStorage.getItem(e(r)(this,u));if(t)try{e(s)(this,c,JSON.parse(t))}catch(t){console.error(`Error: invalid movies library in LocalStorage: ${e(r)(this,u)}`)}}})),a.register("4KMWL",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){var r=o.default(t,e,"get");return n.default(t,r)};var o=r(a("1UHsN")),n=r(a("ffZzF"));function r(t){return t&&t.__esModule?t:{default:t}}})),a.register("1UHsN",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,o){if(!e.has(t))throw new TypeError("attempted to "+o+" private field on non-instance");return e.get(t)}})),a.register("ffZzF",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return e.get?e.get.call(t):e.value}})),a.register("8MQK7",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,o){n.default(t,e),e.set(t,o)};var o,n=(o=a("5k7tO"))&&o.__esModule?o:{default:o}})),a.register("5k7tO",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),a.register("dPxxm",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,r){var a=o.default(t,e,"set");return n.default(t,a,r),r};var o=r(a("1UHsN")),n=r(a("jdVyQ"));function r(t){return t&&t.__esModule?t:{default:t}}})),a.register("jdVyQ",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,o){if(e.set)e.set.call(t,o);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=o}}})),a.register("beht7",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,o){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return o}})),a.register("fyAfh",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){n.default(t,e),e.add(t)};var o,n=(o=a("5k7tO"))&&o.__esModule?o:{default:o}}))}();
//# sourceMappingURL=index.8218007a.js.map
