!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,a.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var r=a("54T7b");function o({id:e,posterURL:t="",title:n="",genres:a="no info",year:r="no info",votes:o=""}){return` \n    <div class="card" data-filmid="${e}">\n        <img src="${t}" class="card__pic">\n        <div class="card__information">\n            <p class="card__film-name">${n}</p>\n            <div class="card__additional-information">\n                <ul class="card__gener-list">\n                    <li class="card__gener-item">${a}</li>\n                </ul>\n                <div class="card__vl"></div>\n                <p class="card__release-year">${r}</p>\n            </div>\n        </div>\n    </div>\n  `}let d=r.default.watched,i=1;const c={gallery:document.querySelector(".gallery"),btnWatched:document.querySelector("#btn-watched"),btnQueue:document.querySelector("#btn-queue")};if(Object.values(c).some((e=>!e)))throw new Error("Invalid markup!");function u(e){const t=e.currentTarget;t===c.btnWatched&&d===r.default.watched||t===c.btnQueue&&d===r.default.queue||(i=1,t===c.btnWatched?(d=r.default.watched,c.btnWatched.classList.add("is-active"),c.btnQueue.classList.remove("is-active")):t===c.btnQueue&&(d=r.default.queue,c.btnWatched.classList.remove("is-active"),c.btnQueue.classList.add("is-active")),d.refreshMovies(),s())}c.gallery.insertAdjacentHTML("afterend",'<div class="js-guard"></div>'),c.guardDiv=document.querySelector(".js-guard"),c.btnWatched.addEventListener("click",u),c.btnQueue.addEventListener("click",u);const l=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&i<d.getCountPages(6)&&(i+=1,s())}))}),{root:null,rootMargin:"300px",threshold:1});function s(){1===i&&d.getCount()>0&&(c.gallery.innerHTML="");const e=d.getMoviesPage(i,6);c.gallery.insertAdjacentHTML("beforeend",function(e){return e.map((e=>o(e))).join("")}(e)),1===i&&d.getCountPages(6)>1?l.observe(c.guardDiv):i===d.getCountPages(6)&&l.unobserve(c.guardDiv)}s();const v={btnWatched:document.querySelector(".modal__button--watched"),btnQueue:document.querySelector(".modal__button--queue"),infoId:document.querySelector(".modal__information"),title:document.querySelector(".modal__title"),poster:document.querySelector(".modal__image"),overview:document.querySelector(".modal__text")};if(Object.values(v).some((e=>!e)))throw new Error("Invalid markup of modal window!");function f(e){if(r.default[e].getMovieById("5"))r.default[e].removeMovie("5");else{const t={id:"5",title:v.title.textContent,posterURL:v.poster.src,overview:v.overview.textContent};r.default[e].addMovie(t)}i=1,s(),function(){const e="5";if(!e)return;r.default.watched.getMovieById(e)?(v.btnWatched.textContent="REMOVE FROM WATCHED",v.btnWatched.classList.remove("js-active")):(v.btnWatched.textContent="ADD TO WATCHED",v.btnWatched.classList.add("js-active"));r.default.queue.getMovieById(e)?(v.btnQueue.textContent="REMOVE FROM QUEUE",v.btnQueue.classList.remove("js-active")):(v.btnQueue.textContent="ADD TO QUEUE",v.btnQueue.classList.add("js-active"))}()}v.btnWatched.addEventListener("click",f.bind(null,"watched")),v.btnQueue.addEventListener("click",f.bind(null,"queue"))}();
//# sourceMappingURL=library.39cef152.js.map
