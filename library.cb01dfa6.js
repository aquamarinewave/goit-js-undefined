!function(){function e(e,t,r,o){Object.defineProperty(e,t,{get:r,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},i={},n=r.parcelRequired7c6;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},r.parcelRequired7c6=n),n.register("54T7b",(function(t,r){e(t.exports,"default",(function(){return s}));var o=n("bSEwQ");const i={watched:new(0,o.default)("Watched_Test"),queue:new(0,o.default)("Queue_Test")};var s=i;for(const e of["watched","queue"]){const t=i[e];t.clearMovies();for(let r=0;r<20;r+=1)t.addMovie({id:String(r+1),title:`Avatar: The Way of Water (${e})`,posterURL:"https://image.tmdb.org/t/p/w500/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg",genres:"Drama, Comedy",year:"2022",vote:"5.7",votes:"1234",popularity:"100.2",original:"Avatar: The Way of Water",overview:"Set more than a decade after the events of the first film, learn the story of the Sully family \n        (Jake, Neytiri, and their kids), the trouble that follows them, the lengths they go to keep each other safe,\n        the battles they fight to stay alive, and the tragedies they endure."})}})),n.register("bSEwQ",(function(r,o){e(r.exports,"default",(function(){return v}));var i=n("4KMWL"),s=n("8MQK7"),a=n("dPxxm"),u=n("beht7"),l=n("fyAfh");var d=new WeakMap,c=new WeakMap,f=new WeakSet,h=new WeakSet;class v{getCount(){return t(i)(this,c).length}getMovies(){return t(i)(this,c)}getMovieById(e){return t(i)(this,c).find((t=>t.id==e))}getCountPages(e){return Math.ceil(t(i)(this,c).length/e)}getMoviesPage(e=1,r=-1){return-1==r?t(i)(this,c):t(i)(this,c).slice((e-1)*r,e*r)}refreshMovies(){t(u)(this,h,g).call(this)}clearMovies(){t(a)(this,c,[]),t(u)(this,f,p).call(this)}addMovie(e){const r=t(i)(this,c).findIndex((t=>t.id==e.id));-1!=r?t(i)(this,c)[r]=e:t(i)(this,c).push(e),t(u)(this,f,p).call(this)}removeMovie(e){const r=t(i)(this,c).findIndex((t=>t.id==e));-1!=r&&(t(i)(this,c).splice(r,1),t(u)(this,f,p).call(this))}constructor(e="mylib"){t(l)(this,f),t(l)(this,h),t(s)(this,d,{writable:!0,value:void 0}),t(s)(this,c,{writable:!0,value:[]}),t(a)(this,d,"MoviesLibrary_"+e),t(u)(this,h,g).call(this)}}function p(){try{localStorage.setItem(t(i)(this,d),JSON.stringify(t(i)(this,c)))}catch(e){console.error(`Error: failure saving movies in LocalStorage: ${t(i)(this,d)}`)}}function g(){t(a)(this,c,[]);const e=localStorage.getItem(t(i)(this,d));if(e)try{t(a)(this,c,JSON.parse(e))}catch(e){console.error(`Error: invalid movies library in LocalStorage: ${t(i)(this,d)}`)}}})),n.register("4KMWL",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var i=r.default(e,t,"get");return o.default(e,i)};var r=i(n("1UHsN")),o=i(n("ffZzF"));function i(e){return e&&e.__esModule?e:{default:e}}})),n.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}})),n.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),n.register("8MQK7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){o.default(e,t),t.set(e,r)};var r,o=(r=n("5k7tO"))&&r.__esModule?r:{default:r}})),n.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),n.register("dPxxm",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,i){var n=r.default(e,t,"set");return o.default(e,n,i),i};var r=i(n("1UHsN")),o=i(n("jdVyQ"));function i(e){return e&&e.__esModule?e:{default:e}}})),n.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}})),n.register("beht7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}})),n.register("fyAfh",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){o.default(e,t),t.add(e)};var r,o=(r=n("5k7tO"))&&r.__esModule?r:{default:r}}));var s=n("54T7b");const a={btnWatched:document.querySelector(".modal__button--watched"),btnQueue:document.querySelector(".modal__button--queue"),infoId:document.querySelector(".modal__information"),title:document.querySelector(".modal__title"),poster:document.querySelector(".modal__image"),overview:document.querySelector(".modal__text")};if(Object.values(a).some((e=>!e)))throw new Error("Invalid markup!");a.btnWatched.addEventListener("click",l.bind(null,"watched")),a.btnQueue.addEventListener("click",l.bind(null,"queue"));const u=a.infoId.dataset.filmid;if(!u)throw new Error("Invalid markup - missed attribute data-filmid!");function l(e){const t=s.default[e];if(t.getMovieById(u))t.removeMovie(u);else{const e={id:u,title:a.title.textContent,posterURL:a.poster.src,overview:a.overview.textContent};t.addMovie(e)}d()}function d(){s.default.watched.getMovieById(u)?(a.btnWatched.textContent="REMOVE FROM WATCHED",a.btnWatched.classList.add("active")):(a.btnWatched.textContent="ADD TO WATCHED",a.btnWatched.classList.remove("active")),s.default.queue.getMovieById(u)?(a.btnQueue.textContent="REMOVE FROM QUEUE",a.btnQueue.classList.add("active")):(a.btnQueue.textContent="ADD TO QUEUE",a.btnQueue.classList.remove("active"))}d()}();
//# sourceMappingURL=library.cb01dfa6.js.map
