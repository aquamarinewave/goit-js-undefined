{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAQ,CACZC,WAAYC,SAASC,cAAc,2BACnCC,SAAYF,SAASC,cAAc,yBACnCE,OAAYH,SAASC,cAAc,uBACnCG,MAAYJ,SAASC,cAAc,iBACnCI,OAAYL,SAASC,cAAc,iBACnCK,SAAYN,SAASC,cAAc,iBAGrC,GAAIM,OAAOC,OAAOV,GAAOW,MAAKC,IAAOA,IACnC,MAAM,IAAIC,MAAM,mCAWlB,SAASC,EAAoBC,GAO3B,GAAIjB,EAAAkB,QAAOD,GAASE,aAVb,KAWLnB,EAAAkB,QAAOD,GAASG,YAXX,SAYA,CACL,MAAMC,EA+BM,CACZC,GA7CK,IA8CLd,MAAON,EAAMM,MAAMe,YACnBC,UAAWtB,EAAMO,OAAOgB,IACxBf,SAAUR,EAAMQ,SAASa,aAlCzBvB,EAAAkB,QAAOD,GAASS,SAASL,E,EAK7B,WACE,MAAMM,EApBC,IAsBP,IAAKA,EACH,OAGE3B,EAAAkB,QAAOU,QAAQT,aAAaQ,IAC9BzB,EAAMC,WAAWoB,YAAc,sBAC/BrB,EAAMC,WAAW0B,UAAUC,OAAO,eAElC5B,EAAMC,WAAWoB,YAAc,iBAC/BrB,EAAMC,WAAW0B,UAAUE,IAAI,cAG7B/B,EAAAkB,QAAOc,MAAMb,aAAaQ,IAC5BzB,EAAMI,SAASiB,YAAc,oBAC7BrB,EAAMI,SAASuB,UAAUC,OAAO,eAEhC5B,EAAMI,SAASiB,YAAc,eAC7BrB,EAAMI,SAASuB,UAAUE,IAAI,a,CAvB/BE,E,CArBF/B,EAAMC,WAAW+B,iBAAiB,QAASlB,EAAoBmB,KAAK,KAAM,YAC1EjC,EAAMI,SAAS4B,iBAAiB,QAASlB,EAAoBmB,KAAK,KAAM,S","sources":["src/js/library-modal.js"],"sourcesContent":["import myLibs from './library-service';\n\nconst refsM = {\n  btnWatched: document.querySelector('.modal__button--watched'),\n  btnQueue:   document.querySelector('.modal__button--queue'),\n  infoId:     document.querySelector('.modal__information'),\n  title:      document.querySelector('.modal__title'),\n  poster:     document.querySelector('.modal__image'),\n  overview:   document.querySelector('.modal__text'),\n};\n\nif (Object.values(refsM).some(el => !el)) {\n  throw new Error('Invalid markup of modal window!');\n}\n\nrefsM.btnWatched.addEventListener('click', onModalLibraryClick.bind(null, \"watched\"));\nrefsM.btnQueue.addEventListener('click', onModalLibraryClick.bind(null, \"queue\"));\n\nfunction getModalFilmId() {\n  //return refsM.infoId.dataset.filmid;\n  return '5';   // !?! - заглушка, убрать\n}\n\nfunction onModalLibraryClick(libName) {\n  const movieId = getModalFilmId();\n\n  if (!movieId) {\n    return;\n  }\n\n  if (myLibs[libName].getMovieById(movieId)) {\n    myLibs[libName].removeMovie(movieId);\n  } else {\n    const movie = getMovieModal();\n    myLibs[libName].addMovie(movie);\n  }\n  refreshBtns();\n}\n\nfunction refreshBtns() {\n  const movieId = getModalFilmId();\n\n  if (!movieId) {\n    return;\n  }\n\n  if (myLibs.watched.getMovieById(movieId)) {\n    refsM.btnWatched.textContent = 'REMOVE FROM WATCHED';\n    refsM.btnWatched.classList.remove(\"js-active\");\n  } else {\n    refsM.btnWatched.textContent = 'ADD TO WATCHED';\n    refsM.btnWatched.classList.add(\"js-active\");\n  }\n\n  if (myLibs.queue.getMovieById(movieId)) {\n    refsM.btnQueue.textContent = 'REMOVE FROM QUEUE';\n    refsM.btnQueue.classList.remove(\"js-active\");\n  } else {\n    refsM.btnQueue.textContent = 'ADD TO QUEUE';\n    refsM.btnQueue.classList.add(\"js-active\");\n  }\n}\n\nfunction getMovieModal() {\n  const movie = {\n    id: getModalFilmId(),\n    title: refsM.title.textContent,\n    posterURL: refsM.poster.src,\n    overview: refsM.overview.textContent,\n    /* !?! - доделать когда будет разметка\n    genres: 'Drama, Comedy',\n    year: 2022,\n    vote: '5.7',\n    votes: '1234',\n    popularity: '100.2',\n    original: `Avatar: The Way of Water`,\n    */\n  };\n\n  return movie;\n}\n"],"names":["$54T7b","parcelRequire","$f3e59abbf028fd14$var$refsM","btnWatched","document","querySelector","btnQueue","infoId","title","poster","overview","Object","values","some","el","Error","$f3e59abbf028fd14$var$onModalLibraryClick","libName","default","getMovieById","removeMovie","movie","id","textContent","posterURL","src","addMovie","movieId","watched","classList","remove","add","queue","$f3e59abbf028fd14$var$refreshBtns","addEventListener","bind"],"version":3,"file":"index.151fe404.js.map"}