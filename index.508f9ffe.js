!function(){function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=n.parcelRequired7c6;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequired7c6=i),i.register("iE7OH",(function(t,n){var o,r;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var i={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)i[t[n]]=e[t[n]]},r=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("b3pWk",(function(t,n){e(t.exports,"default",(function(){return r}));var o=i("kWfXz");function r({id:e,posterURL:t="",title:n="",genres:r="",year:i="",vote:a=""}){return`<li class="card" data-filmid="${e}">\n        <div class="card__wrapper"><img src="${t||o.noPosterURL}" alt="${n}" class="card__pic"></div>\n        <div class="card__information">\n            <p class="card__film-name">${n}</p>\n            <div class="card__additional-information">\n            <p class="card__gener-item">${r||"no info"} &#124; <span class="card__release-year">${i||"no info"}</span></p>\n            <div class="card__rating-background"> \n              <p class="card__rating">${a}</p>\n            </div>\n            </div>\n        </div>\n    </li>`}})),i.register("kWfXz",(function(n,o){e(n.exports,"noPosterURL",(function(){return u})),e(n.exports,"openMovieModal",(function(){return d}));var r=i("54T7b"),a=i("l1Gdk");let s,l;const u="https://dummyimage.com/400x500/dbdbdb/000000.png&text=No+poster";function d(e=null){return s={overlay:document.querySelector(".overlay"),btnModalClose:document.querySelector(".modal__button-cls"),btnWatched:document.querySelector(".modal__button--watched"),btnQueue:document.querySelector(".modal__button--queue"),infoId:document.querySelector(".modal__information"),title:document.querySelector(".modal__title"),poster:document.querySelector(".modal__image"),genres:document.querySelector(".modal__genres"),year:document.querySelector(".modal__year"),vote:document.querySelector(".modal__vote"),votes:document.querySelector(".modal__votes"),popularity:document.querySelector(".modal__popularity"),original:document.querySelector(".modal__original"),overview:document.querySelector(".modal__text")},Object.values(s).some((e=>!e))&&console.error("Error: invalid markup of modal window!"),l=e,s.btnModalClose.addEventListener("click",v),s.overlay.addEventListener("click",p),document.addEventListener("keydown",m),s.btnWatched.addEventListener("click",f.bind(null,"watched")),s.btnQueue.addEventListener("click",f.bind(null,"queue")),_(),s.overlay.classList.remove("modal__is-hidden"),document.body.classList.add("modal__is-open"),document.body.style.top=`-${document.documentElement.style.getPropertyValue("--scroll-y")}`,s}function c(){return s.infoId.dataset.filmid}function f(e){const t=c();t&&(r.default[e].getMovieById(t)?r.default[e].removeMovie(t):r.default[e].addMovie({id:c(),title:s.title.textContent,posterURL:s.poster.src===u?"":s.poster.src,overview:s.overview.textContent,genres:s.genres.textContent,year:s.year.textContent,vote:s.vote.textContent,votes:s.votes.textContent,popularity:s.popularity.textContent,original:s.original.textContent}),_())}function _(){const e=c();e&&(r.default.watched.getMovieById(e)?(s.btnWatched.textContent="REMOVE FROM WATCHED",s.btnWatched.classList.remove("js-active")):(s.btnWatched.textContent="ADD TO WATCHED",s.btnWatched.classList.add("js-active")),r.default.queue.getMovieById(e)?(s.btnQueue.textContent="REMOVE FROM QUEUE",s.btnQueue.classList.remove("js-active")):(s.btnQueue.textContent="ADD TO QUEUE",s.btnQueue.classList.add("js-active")))}function v(){s.overlay.classList.add("modal__is-hidden"),document.body.classList.remove("modal__is-open");const e=document.body.style.top,t=document.documentElement.style.scrollBehavior;document.body.style.top="",document.documentElement.style.scrollBehavior="auto",window.scrollTo(0,-1*parseInt(e||"0")),document.documentElement.style.scrollBehavior=t,l&&l()}function m(e){"Escape"===e.key&&(v(),document.removeEventListener("keydown",m))}function p(e){e.currentTarget===e.target&&(v(),s.overlay.removeEventListener("click",p))}window.addEventListener("scroll",t(a)((()=>document.documentElement.style.setProperty("--scroll-y",`${window.scrollY}px`)),100))})),i.register("54T7b",(function(t,n){e(t.exports,"default",(function(){return r}));var o=i("bSEwQ");var r={watched:new(0,o.default)("Watched"),queue:new(0,o.default)("Queue")}})),i.register("bSEwQ",(function(n,o){e(n.exports,"default",(function(){return v}));var r=i("4KMWL"),a=i("8MQK7"),s=i("dPxxm"),l=i("beht7"),u=i("fyAfh");var d=new WeakMap,c=new WeakMap,f=new WeakSet,_=new WeakSet;class v{getCount(){return t(r)(this,c).length}getMovies(){return t(r)(this,c)}getMovieById(e){return t(r)(this,c).find((t=>t.id===e))}getCountPages(e){return Math.ceil(t(r)(this,c).length/e)}getMoviesPage(e=1,n=-1){return-1===n?t(r)(this,c):t(r)(this,c).slice((e-1)*n,e*n)}refreshMovies(){t(l)(this,_,p).call(this)}clearMovies(){t(s)(this,c,[]),t(l)(this,f,m).call(this)}addMovie(e){const n=t(r)(this,c).findIndex((t=>t.id===e.id));-1!==n?t(r)(this,c)[n]=e:t(r)(this,c).push(e),t(l)(this,f,m).call(this)}removeMovie(e){const n=t(r)(this,c).findIndex((t=>t.id===e));-1!==n&&(t(r)(this,c).splice(n,1),t(l)(this,f,m).call(this))}constructor(e="mylib"){t(u)(this,f),t(u)(this,_),t(a)(this,d,{writable:!0,value:void 0}),t(a)(this,c,{writable:!0,value:[]}),t(s)(this,d,"MoviesLibrary_"+e),t(l)(this,_,p).call(this)}}function m(){try{localStorage.setItem(t(r)(this,d),JSON.stringify(t(r)(this,c)))}catch(e){console.error(`Error: failure saving movies in LocalStorage: ${t(r)(this,d)}`)}}function p(){t(s)(this,c,[]);const e=localStorage.getItem(t(r)(this,d));if(e)try{t(s)(this,c,JSON.parse(e))}catch(e){console.error(`Error: invalid movies library in LocalStorage: ${t(r)(this,d)}`)}}})),i.register("4KMWL",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){var r=n.default(e,t,"get");return o.default(e,r)};var n=r(i("1UHsN")),o=r(i("ffZzF"));function r(e){return e&&e.__esModule?e:{default:e}}})),i.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}})),i.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),i.register("8MQK7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){o.default(e,t),t.set(e,n)};var n,o=(n=i("5k7tO"))&&n.__esModule?n:{default:n}})),i.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("dPxxm",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){var i=n.default(e,t,"set");return o.default(e,i,r),r};var n=r(i("1UHsN")),o=r(i("jdVyQ"));function r(e){return e&&e.__esModule?e:{default:e}}})),i.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}})),i.register("beht7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}})),i.register("fyAfh",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){o.default(e,t),t.add(e)};var n,o=(n=i("5k7tO"))&&n.__esModule?n:{default:n}})),i.register("l1Gdk",(function(e,t){var o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n&&n&&n.Object===Object&&n,u="object"==typeof self&&self&&self.Object===Object&&self,d=l||u||Function("return this")(),c=Object.prototype.toString,f=Math.max,_=Math.min,v=function(){return d.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function p(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=i.test(e);return n||a.test(e)?s(e.slice(2),n?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var o,r,i,a,s,l,u=0,d=!1,c=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=o,i=r;return o=r=void 0,u=t,a=e.apply(i,n)}function g(e){return u=e,s=setTimeout(x,t),d?h(e):a}function b(e){var n=e-l;return void 0===l||n>=t||n<0||c&&e-u>=i}function x(){var e=v();if(b(e))return w(e);s=setTimeout(x,function(e){var n=t-(e-l);return c?_(n,i-(e-u)):n}(e))}function w(e){return s=void 0,y&&o?h(e):(o=r=void 0,a)}function E(){var e=v(),n=b(e);if(o=arguments,r=this,l=e,n){if(void 0===s)return g(l);if(c)return s=setTimeout(x,t),h(l)}return void 0===s&&(s=setTimeout(x,t)),a}return t=p(t)||0,m(n)&&(d=!!n.leading,i=(c="maxWait"in n)?f(p(n.maxWait)||0,t):i,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==s&&clearTimeout(s),u=0,o=l=r=s=void 0},E.flush=function(){return void 0===s?a:w(v())},E}})),i.register("73ES2",(function(n,o){e(n.exports,"default",(function(){return s}));var r=i("kWfXz"),a=i("k8rmz");function s({id:e,posterURL:n="",title:o="",genres:i="",year:s="",vote:l="",votes:u="",popularity:d="",original:c="",overview:f=""}){return`\n  \n    <div class="modal__poster">\n    <button type="button" class="modal__button-cls">\n      <svg height="30" width="30" class="modal__icon">\n        <use href="${t(a)}#icon-close"></use>\n      </svg>\n    </button>\n      <img class="modal__image" src="${n||r.noPosterURL}" alt="${o}"/>\n    </div>\n    <div class="modal__information" data-filmid="${e}">\n      <h2 class="modal__title">${o}</h2>\n      <table class="modal__table">\n        <tr class="modal__tr">\n          <td class="modal__td">Vote / Votes</td>\n          <td class="modal__td-right">\n            <span class="modal__vote">${l}</span>\n            / <span class="modal__votes">${u}</span>\n          </td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Popularity</td>\n          <td class="modal__td-right modal__popularity">${d}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Original Title</td>\n          <td class="modal__td-right modal__original">${c}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Genre</td>\n          <td class="modal__td-right modal__genres">${i}</td>\n        </tr>\n        <tr class="modal__tr">\n          <td class="modal__td">Year</td>\n          <td class="modal__td-right modal__year">${s}</td>\n        </tr>\n      </table>\n      <h3 class="modal__description">About</h3>\n      <p class="modal__text">${f}</p>\n      <div class="modal__flex">\n        <button class="modal__button modal__button--watched js-active" type="button">add to Watched</button>\n        <button class="modal__button modal__button--queue js-active" type="button">add to queue</button>\n      </div>\n    </div> \n  `}})),i.register("k8rmz",(function(e,t){e.exports=i("aNJCr").getBundleURL("5yY5W")+i("iE7OH").resolve("ee16w")})),i.register("aNJCr",(function(t,n){var o;e(t.exports,"getBundleURL",(function(){return o}),(function(e){return o=e}));var r={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=r[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),r[e]=t),t}})),i("iE7OH").register(JSON.parse('{"5yY5W":"index.508f9ffe.js","ee16w":"sprite.07866f17.svg"}'))}();
//# sourceMappingURL=index.508f9ffe.js.map
