!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,r.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r);var o=r("54T7b"),a=r("b3pWk"),i=r("73ES2"),l=r("kWfXz");let d=o.default.watched,u=1;const c={gallery:document.querySelector(".gallery"),btnWatched:document.querySelector("#btn-watched"),btnQueue:document.querySelector("#btn-queue"),modalContent:document.querySelector(".modal__content")};function s(e){const t=e.currentTarget;t===c.btnWatched&&d===o.default.watched||t===c.btnQueue&&d===o.default.queue||(u=1,t===c.btnWatched?(d=o.default.watched,c.btnWatched.classList.add("is-active"),c.btnQueue.classList.remove("is-active")):t===c.btnQueue&&(d=o.default.queue,c.btnWatched.classList.remove("is-active"),c.btnQueue.classList.add("is-active")),d.refreshMovies(),g())}Object.values(c).some((e=>!e))&&console.error("Error: invalid markup!"),c.gallery.insertAdjacentHTML("afterend",'<div class="js-guard"></div>'),c.guardDiv=document.querySelector(".js-guard"),c.btnWatched.addEventListener("click",s),c.btnQueue.addEventListener("click",s);const f=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&u<d.getCountPages(9)&&(u+=1,g())}))}),{root:null,rootMargin:"300px",threshold:1});function g(){1===u&&(d.getCount()>0?c.gallery.innerHTML="":c.gallery.innerHTML='<li class="gallery_pin">The library is empty</li>');const e=d.getMoviesPage(u,9);c.gallery.insertAdjacentHTML("beforeend",function(e){return e.map((e=>(0,a.default)(e))).join("")}(e)),1===u&&d.getCountPages(9)>1?f.observe(c.guardDiv):u===d.getCountPages(9)&&f.unobserve(c.guardDiv)}function v(){u=1,g()}g(),c.gallery.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest(".card");if(!t)return;const n=t.dataset.filmid,r=d.getMovieById(n);if(!r)return void console.error(`Movie with id = ${n} isn't found in library!`);c.modalContent.innerHTML=(0,i.default)(r),(0,l.openMovieModal)(v)}))}();
//# sourceMappingURL=library.44ef629a.js.map
