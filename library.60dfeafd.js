!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequired7c6;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,r.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequired7c6=r);var a=r("54T7b");function o({id:e,posterURL:t="",title:n="",genres:r="no info",year:a="no info",votes:o=""}){return` \n    <div class="card" data-filmid="${e}">\n        <img src="${t}" alt="${n}" class="card__pic">\n        <div class="card__information">\n            <p class="card__film-name">${n}</p>\n            <div class="card__additional-information">\n                <ul class="card__gener-list">\n                    <li class="card__gener-item">${r}</li>\n                </ul>\n                <div class="card__vl"></div>\n                <p class="card__release-year">${a}</p>\n            </div>\n        </div>\n    </div>\n  `}var d=r("73ES2"),i=r("kWfXz");let l=a.default.watched,c=1;const s={gallery:document.querySelector(".gallery"),btnWatched:document.querySelector("#btn-watched"),btnQueue:document.querySelector("#btn-queue"),overlay:document.querySelector(".overlay"),btnModalClose:document.querySelector(".modal__button-cls"),modalContent:document.querySelector(".modal__content")};function u(e){const t=e.currentTarget;t===s.btnWatched&&l===a.default.watched||t===s.btnQueue&&l===a.default.queue||(c=1,t===s.btnWatched?(l=a.default.watched,s.btnWatched.classList.add("is-active"),s.btnQueue.classList.remove("is-active")):t===s.btnQueue&&(l=a.default.queue,s.btnWatched.classList.remove("is-active"),s.btnQueue.classList.add("is-active")),l.refreshMovies(),f())}Object.values(s).some((e=>!e))&&console.error("Error: invalid markup!"),s.gallery.insertAdjacentHTML("afterend",'<div class="js-guard"></div>'),s.guardDiv=document.querySelector(".js-guard"),s.btnWatched.addEventListener("click",u),s.btnQueue.addEventListener("click",u);const v=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&c<l.getCountPages(6)&&(c+=1,f())}))}),{root:null,rootMargin:"300px",threshold:1});function f(){1===c&&(s.gallery.innerHTML="");const e=l.getMoviesPage(c,6);s.gallery.insertAdjacentHTML("beforeend",function(e){return e.map((e=>o(e))).join("")}(e)),1===c&&l.getCountPages(6)>1?v.observe(s.guardDiv):c===l.getCountPages(6)&&v.unobserve(s.guardDiv)}function g(){s.overlay.classList.add("visually-hidden"),document.body.classList.remove("modal__is-open"),c=1,f()}function m(e){"Escape"===e.key&&(g(),document.removeEventListener("keydown",m))}function y(e){e.currentTarget===e.target&&(g(),s.overlay.removeEventListener("click",y))}f(),s.btnModalClose.addEventListener("click",g),s.gallery.addEventListener("click",(function(e){e.preventDefault();const t=e.target.closest(".card");if(!t)return;const n=t.dataset.filmid,r=l.getMovieById(n);if(!r)return void console.error(`Movie with id = ${n} isn't found in library!`);s.modalContent.innerHTML=(0,d.default)(r),(0,i.initModal)(),s.overlay.classList.remove("visually-hidden"),document.body.classList.add("modal__is-open"),document.addEventListener("keydown",m),s.overlay.addEventListener("click",y)}))}();
//# sourceMappingURL=library.60dfeafd.js.map
